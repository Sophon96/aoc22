print(sum([i+1 for i, p in enumerate([(lambda ip, f: f(*ip, f))([eval(packet.strip()) for packet in pairs.splitlines()], (lambda a, b, rec: next((rt for rt in [(isinstance(a[el], list) and isinstance(b[el], list) and rec(a[el], b[el], rec)) or (isinstance(a[el], list) and rec(a[el], [b[el]], rec)) or (isinstance(b[el], list) and rec([a[el]], b[el], rec)) or (-1 if a[el] > b[el] else (1 if a[el] < b[el] else 2)) for el in range(min(len(a), len(b)))] if rt != 2), False) or int(len(a) < len(b)) or -(len(a) > len(b)) or 2)) for pairs in open("input.txt", "r").read().split("\n\n")]) if p == 1]))
